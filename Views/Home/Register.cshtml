@{
    ViewData["Title"] = "Register";
    Layout = "_CoffeeLayout";
}

@section Styles {
    <link rel="stylesheet" href="~/css/register.css" asp-append-version="true" />
}

<div class="auth-card">
    <h2>REGISTRATION</h2>

    <!-- Added id and novalidate for custom validation -->
    <form id="registerForm" novalidate>
        <div class="mb-3">
            <label for="username" class="form-label">Username</label>
            <input type="text" class="form-control" id="username" name="username" placeholder="Enter username" required>
            <div class="invalid-feedback">Please enter a username.</div>
        </div>

        <div class="mb-3">
            <label for="phone" class="form-label">Phone Number</label>
            <input type="tel" class="form-control" id="phone" name="phone" placeholder="123-456-7890" required>
            <div class="invalid-feedback">Please enter a valid phone number.</div>
        </div>

        <div class="mb-3">
            <label for="email" class="form-label">Email / ClipperID</label>
            <input type="email" class="form-control" id="email" name="email" placeholder="Enter email or ClipperID" required>
            <div class="invalid-feedback">Please enter a valid email address.</div>
        </div>

        <div class="mb-3">
            <label for="password" class="form-label">Password</label>
            <input type="password" class="form-control" id="password" name="password" placeholder="Create a secure password" required>
            <div class="invalid-feedback">Please create a password that meets all requirements.</div>
            
            <!-- Password strength indicator -->
            <div class="password-strength mt-2">
                <div class="strength-bar">
                    <div class="strength-fill" id="strengthFill"></div>
                </div>
                <div class="strength-text" id="strengthText">Password strength</div>
            </div>

            <!-- Password requirements -->
            <div class="password-requirements mt-2">
                <div class="requirement" id="req-length">
                    <i class="bi bi-circle"></i> At least 8 characters
                </div>
                <div class="requirement" id="req-uppercase">
                    <i class="bi bi-circle"></i> One uppercase letter
                </div>
                <div class="requirement" id="req-lowercase">
                    <i class="bi bi-circle"></i> One lowercase letter
                </div>
                <div class="requirement" id="req-number">
                    <i class="bi bi-circle"></i> One number
                </div>
                <div class="requirement" id="req-special">
                    <i class="bi bi-circle"></i> One special character (&#33;&#64;&#35;&#36;&#37;&#94;&#38;&#42;)
                </div>
            </div>
        </div>

        <div class="mb-3">
            <label for="confirmPassword" class="form-label">Confirm Password</label>
            <input type="password" class="form-control" id="confirmPassword" name="confirmPassword" placeholder="Confirm your password" required>
            <div class="invalid-feedback">Passwords do not match.</div>
        </div>

        <!-- Notification consent checkboxes -->
        <div class="mb-3 consent-section">
            <label class="consent-header">Notification Preferences</label>
            <div class="consent-options">
                <div class="form-check mb-2">
                    <input class="form-check-input" type="checkbox" id="emailNotifications">
                    <label class="form-check-label" for="emailNotifications">
                        Email notifications
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="textNotifications">
                    <label class="form-check-label" for="textNotifications">
                        Text notifications
                    </label>
                </div>
            </div>
        </div>

        <button type="submit" class="btn btn-coffee">Register</button>

        <a href="@Url.Action("Index", "Home")" class="auth-link">Already have an account? → Login</a>
    </form>
</div>

<!-- Success Modal -->
<div class="modal fade" id="registerSuccessModal" tabindex="-1" aria-labelledby="registerSuccessLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content text-center p-4">
            <div class="modal-body">
                <div class="mb-3">
                    <span class="text-success display-4">✔</span>
                </div>
                <h4 id="registerSuccessLabel">Registration Successful!</h4>
                <p class="text-muted">You'll be redirected to the login page shortly.</p>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script src="~/js/register.js" asp-append-version="true"></script>
}