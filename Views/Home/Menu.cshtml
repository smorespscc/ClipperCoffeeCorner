@{
    ViewData["Title"] = "Menu";
    Layout = "_CoffeeLayout";
}

@section Styles {
    <link rel="stylesheet" href="~/css/menu.css" asp-append-version="true" />
}

<div class="container my-4">
    <div class="menu-card mx-auto shadow-sm">

        <!-- Viewing Mode Banner (hidden by default) -->
        <div id="viewingModeBanner" class="viewing-mode-banner" style="display: none;">
            <i class="bi bi-eye"></i>
            <span id="viewingModeText">Viewing Menu Only - We're Currently Closed</span>
        </div>

        <!-- Header -->
        <header class="menu-header text-center py-4">
            <h2 class="mb-3">MENU</h2>
            
            <!-- Selection Legend -->
            <div class="selection-legend mb-3">
                <div class="legend-item">
                    <div class="legend-indicator manual-selection"></div>
                    <span>Manual Selection</span>
                </div>
                <div class="legend-item">
                    <div class="legend-indicator saved-order"></div>
                    <span>Applied Saved Order</span>
                </div>
            </div>
            
            <div class="current-serving-container">
                <div class="serving-status-badge">
                    <i class="bi bi-clock-fill me-2"></i>
                    <span id="servingStatus">Currently Serving</span>
                </div>
                <div class="serving-selector dropdown">
                    <button class="serving-dropdown-btn dropdown-toggle" type="button" id="servingDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                        <span class="serving-icon" id="servingIcon">
                            <i class="bi bi-sunrise-fill"></i>
                        </span>
                        <span class="serving-type-text" id="servingType">Breakfast</span>
                        <span class="serving-hours-text" id="servingHours">8:00am - 10:30am</span>
                    </button>
                    <ul class="dropdown-menu dropdown-menu-center" aria-labelledby="servingDropdown">
                        <li>
                            <a class="dropdown-item menu-option" href="#" data-menu="breakfast">
                                <i class="bi bi-sunrise-fill me-2"></i>
                                <span class="menu-name">Breakfast</span>
                                <span class="menu-time">8:00am - 10:30am</span>
                                <span class="active-badge">Active</span>
                            </a>
                        </li>
                        <li>
                            <a class="dropdown-item menu-option" href="#" data-menu="lunch">
                                <i class="bi bi-sun-fill me-2"></i>
                                <span class="menu-name">Lunch</span>
                                <span class="menu-time">10:30am - 2:00pm</span>
                                <span class="active-badge">Active</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </header>

        <div class="menu-body p-3">

            <!-- Row 1: Recent + Saved Orders -->
            <div class="row gx-3 gy-3 mb-2">
                <div class="col-12 col-md-6">
                    <div class="section">
                        <h5 class="section-title">
                            <i class="bi bi-clock-history me-2"></i>Recent Orders
                        </h5>
                        <div id="carouselRecent" class="carousel slide" data-bs-ride="false" data-bs-touch="true" data-bs-wrap="true">
                            <div class="carousel-inner">
                                <div class="carousel-item active text-center">
                                    <img src="https://images.unsplash.com/photo-1572442388796-11668a67e53d?ixlib=rb-4.1.0&auto=format&fit=crop&q=80&w=1170"
                                         class="d-block mx-auto rounded carousel-img menu-item"
                                         alt="Cappuccino"
                                         data-bs-toggle="modal"
                                         data-bs-target="#itemModal"
                                         data-item="Cappuccino"
                                         data-type="drink"
                                         onerror="this.classList.add('image-error')">
                                    <div class="carousel-caption-text">Cappuccino — Small</div>
                                </div>
                                <div class="carousel-item text-center">
                                    <img src="https://images.unsplash.com/photo-1461023058943-07fcbe16d735?ixlib=rb-4.1.0&auto=format&fit=crop&q=80&w=1170"
                                         class="d-block mx-auto rounded carousel-img menu-item"
                                         alt="Vanilla Latte"
                                         data-bs-toggle="modal"
                                         data-bs-target="#itemModal"
                                         data-item="Vanilla Latte"
                                         data-type="drink"
                                         onerror="this.classList.add('image-error')">
                                    <div class="carousel-caption-text">Vanilla Latte — Medium</div>
                                </div>
                            </div>
                            <button class="carousel-control-prev" type="button" data-bs-target="#carouselRecent" data-bs-slide="prev">
                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                <span class="visually-hidden">Previous</span>
                            </button>
                            <button class="carousel-control-next" type="button" data-bs-target="#carouselRecent" data-bs-slide="next">
                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                <span class="visually-hidden">Next</span>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="col-12 col-md-6">
                    <div class="section">
                        <h5 class="section-title">
                            <i class="bi bi-bookmark-fill me-2"></i>Saved Orders
                            <small class="ms-2 opacity-75">(Click to apply or customize)</small>
                        </h5>
                        <div id="carouselSaved" class="carousel slide" data-bs-ride="false" data-bs-touch="true" data-bs-wrap="true">
                            <div class="carousel-inner">
                                <div class="carousel-item active text-center">
                                    <img src="https://images.unsplash.com/photo-1555507036-ab1f4038808a?ixlib=rb-4.1.0&auto=format&fit=crop&q=80&w=1170"
                                         class="d-block mx-auto rounded carousel-img menu-item"
                                         alt="Butter Croissant"
                                         data-bs-toggle="modal"
                                         data-bs-target="#itemModal"
                                         data-item="Butter Croissant"
                                         data-type="food"
                                         onerror="this.classList.add('image-error')">
                                    <div class="carousel-caption-text">Butter Croissant</div>
                                </div>
                                <div class="carousel-item text-center">
                                    <img src="https://images.unsplash.com/photo-1607958996333-41aef7caefaa?ixlib=rb-4.1.0&auto=format&fit=crop&q=80&w=1170"
                                         class="d-block mx-auto rounded carousel-img menu-item"
                                         alt="Blueberry Muffin"
                                         data-bs-toggle="modal"
                                         data-bs-target="#itemModal"
                                         data-item="Blueberry Muffin"
                                         data-type="food"
                                         onerror="this.classList.add('image-error')">
                                    <div class="carousel-caption-text">Blueberry Muffin</div>
                                </div>
                            </div>
                            <button class="carousel-control-prev" type="button" data-bs-target="#carouselSaved" data-bs-slide="prev">
                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                <span class="visually-hidden">Previous</span>
                            </button>
                            <button class="carousel-control-next" type="button" data-bs-target="#carouselSaved" data-bs-slide="next">
                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                <span class="visually-hidden">Next</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Row 2: Trending + Specials -->
            <div class="row gx-3 gy-3 mb-2">
                <div class="col-12 col-md-6">
                    <div class="section">
                        <h5 class="section-title">
                            <i class="bi bi-fire me-2"></i>Trending
                        </h5>
                        <div id="carouselTrending" class="carousel slide" data-bs-ride="false" data-bs-touch="true" data-bs-wrap="true">
                            <div class="carousel-inner">
                                <div class="carousel-item active text-center">
                                    <img src="https://images.unsplash.com/photo-1564890369478-c89ca6d9cde9?w=800&h=800&fit=crop&crop=center"
                                         class="d-block mx-auto rounded carousel-img menu-item"
                                         alt="Iced Matcha Latte"
                                         data-bs-toggle="modal"
                                         data-bs-target="#itemModal"
                                         data-item="Iced Matcha Latte"
                                         data-type="drink"
                                         onerror="this.classList.add('image-error')">
                                    <div class="carousel-caption-text">Iced Matcha Latte</div>
                                </div>
                                <div class="carousel-item text-center">
                                    <img src="https://images.unsplash.com/photo-1572490122747-3968b75cc699?w=800&h=800&fit=crop&crop=center"
                                         class="d-block mx-auto rounded carousel-img menu-item"
                                         alt="Blended Coffee"
                                         data-bs-toggle="modal"
                                         data-bs-target="#itemModal"
                                         data-item="Blended Coffee"
                                         data-type="drink"
                                         onerror="this.classList.add('image-error')">
                                    <div class="carousel-caption-text">Blended Coffee</div>
                                </div>
                            </div>
                            <button class="carousel-control-prev" type="button" data-bs-target="#carouselTrending" data-bs-slide="prev">
                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                <span class="visually-hidden">Previous</span>
                            </button>
                            <button class="carousel-control-next" type="button" data-bs-target="#carouselTrending" data-bs-slide="next">
                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                <span class="visually-hidden">Next</span>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="col-12 col-md-6">
                    <div class="section">
                        <h5 class="section-title">
                            <i class="bi bi-star-fill me-2"></i>Specials
                        </h5>
                        <div id="carouselSpecials" class="carousel slide" data-bs-ride="false" data-bs-touch="true" data-bs-wrap="true">
                            <div class="carousel-inner">
                                <div class="carousel-item active text-center">
                                    <img src="https://images.unsplash.com/photo-1576092768241-dec231879fc3?w=800&h=800&fit=crop&crop=center"
                                         class="d-block mx-auto rounded carousel-img menu-item"
                                         alt="Chai Latte"
                                         data-bs-toggle="modal"
                                         data-bs-target="#itemModal"
                                         data-item="Chai Latte"
                                         data-type="drink"
                                         onerror="this.classList.add('image-error')">
                                    <div class="carousel-caption-text">Chai Latte</div>
                                </div>
                                <div class="carousel-item text-center">
                                    <img src="https://images.unsplash.com/photo-1497935586351-b67a49e012bf?w=800&h=800&fit=crop&crop=center"
                                         class="d-block mx-auto rounded carousel-img menu-item"
                                         alt="Drip Coffee"
                                         data-bs-toggle="modal"
                                         data-bs-target="#itemModal"
                                         data-item="Drip Coffee"
                                         data-type="drink"
                                         onerror="this.classList.add('image-error')">
                                    <div class="carousel-caption-text">Drip Coffee</div>
                                </div>
                            </div>
                            <button class="carousel-control-prev" type="button" data-bs-target="#carouselSpecials" data-bs-slide="prev">
                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                <span class="visually-hidden">Previous</span>
                            </button>
                            <button class="carousel-control-next" type="button" data-bs-target="#carouselSpecials" data-bs-slide="next">
                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                <span class="visually-hidden">Next</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Row 3: Drink Menu -->
            <div class="row gx-3 gy-3 mb-2">
                <div class="col-12">
                    <div class="section">
                        <h5 class="section-title">
                            <i class="bi bi-cup-hot-fill me-2"></i>Drink Menu
                            <small class="ms-2 opacity-75">(Click to customize and add)</small>
                        </h5>
                        <div id="carouselDrinks" class="carousel slide" data-bs-ride="false" data-bs-touch="true" data-bs-wrap="true">
                            <div class="carousel-inner">
                                <div class="carousel-item active text-center">
                                    <img src="https://images.unsplash.com/photo-1576092768241-dec231879fc3?w=800&h=600&fit=crop&crop=center"
                                         class="d-block mx-auto rounded carousel-img-lg menu-item"
                                         alt="Chai Latte"
                                         data-bs-toggle="modal"
                                         data-bs-target="#itemModal"
                                         data-item="Chai Latte"
                                         data-type="drink"
                                         onerror="this.classList.add('image-error')">
                                    <div class="carousel-caption-text">Chai Latte</div>
                                </div>
                                <div class="carousel-item text-center">
                                    <img src="https://images.unsplash.com/photo-1515823064-d6e0c04616a7?w=800&h=600&fit=crop&crop=center"
                                         class="d-block mx-auto rounded carousel-img-lg menu-item"
                                         alt="Matcha Latte"
                                         data-bs-toggle="modal"
                                         data-bs-target="#itemModal"
                                         data-item="Matcha Latte"
                                         data-type="drink"
                                         onerror="this.classList.add('image-error')">
                                    <div class="carousel-caption-text">Matcha Latte</div>
                                </div>
                                <div class="carousel-item text-center">
                                    <img src="https://images.unsplash.com/photo-1461023058943-07fcbe16d735?w=800&h=600&fit=crop&crop=center"
                                         class="d-block mx-auto rounded carousel-img-lg menu-item"
                                         alt="Regular Latte"
                                         data-bs-toggle="modal"
                                         data-bs-target="#itemModal"
                                         data-item="Regular Latte"
                                         data-type="drink"
                                         onerror="this.classList.add('image-error')">
                                    <div class="carousel-caption-text">Regular Latte</div>
                                </div>
                                <div class="carousel-item text-center">
                                    <img src="https://images.unsplash.com/photo-1514432324607-a09d9b4aefdd?w=800&h=600&fit=crop&crop=center"
                                         class="d-block mx-auto rounded carousel-img-lg menu-item"
                                         alt="Americano"
                                         data-bs-toggle="modal"
                                         data-bs-target="#itemModal"
                                         data-item="Americano"
                                         data-type="drink"
                                         onerror="this.classList.add('image-error')">
                                    <div class="carousel-caption-text">Americano</div>
                                </div>
                                <div class="carousel-item text-center">
                                    <img src="https://images.unsplash.com/photo-1510591509098-f4fdc6d0ff04?w=800&h=600&fit=crop&crop=center"
                                         class="d-block mx-auto rounded carousel-img-lg menu-item"
                                         alt="Espresso"
                                         data-bs-toggle="modal"
                                         data-bs-target="#itemModal"
                                         data-item="Espresso"
                                         data-type="drink"
                                         onerror="this.classList.add('image-error')">
                                    <div class="carousel-caption-text">Espresso</div>
                                </div>
                                <div class="carousel-item text-center">
                                    <img src="https://images.unsplash.com/photo-1607260550778-aa9d29444ce1?w=800&h=600&fit=crop&crop=center"
                                         class="d-block mx-auto rounded carousel-img-lg menu-item"
                                         alt="Plain Mocha"
                                         data-bs-toggle="modal"
                                         data-bs-target="#itemModal"
                                         data-item="Plain Mocha"
                                         data-type="drink"
                                         onerror="this.classList.add('image-error')">
                                    <div class="carousel-caption-text">Plain Mocha</div>
                                </div>
                                <div class="carousel-item text-center">
                                    <img src="https://images.unsplash.com/photo-1572442388796-11668a67e53d?w=800&h=600&fit=crop&crop=center"
                                         class="d-block mx-auto rounded carousel-img-lg menu-item"
                                         alt="White Mocha"
                                         data-bs-toggle="modal"
                                         data-bs-target="#itemModal"
                                         data-item="White Mocha"
                                         data-type="drink"
                                         onerror="this.classList.add('image-error')">
                                    <div class="carousel-caption-text">White Mocha</div>
                                </div>
                                <div class="carousel-item text-center">
                                    <img src="https://images.unsplash.com/photo-1497935586351-b67a49e012bf?w=800&h=600&fit=crop&crop=center"
                                         class="d-block mx-auto rounded carousel-img-lg menu-item"
                                         alt="Drip Coffee"
                                         data-bs-toggle="modal"
                                         data-bs-target="#itemModal"
                                         data-item="Drip Coffee"
                                         data-type="drink"
                                         onerror="this.classList.add('image-error')">
                                    <div class="carousel-caption-text">Drip Coffee</div>
                                </div>

                                <div class="carousel-item text-center">
                                    <img src="https://images.unsplash.com/photo-1517487881594-2787fef5ebf7?w=800&h=600&fit=crop&crop=center"
                                         class="d-block mx-auto rounded carousel-img-lg menu-item"
                                         alt="Iced Latte"
                                         data-bs-toggle="modal"
                                         data-bs-target="#itemModal"
                                         data-item="Iced Latte"
                                         data-type="drink"
                                         onerror="this.classList.add('image-error')">
                                    <div class="carousel-caption-text">Iced Latte</div>
                                </div>
                                <div class="carousel-item text-center">
                                    <img src="https://images.unsplash.com/photo-1594631252845-29fc4cc8cde9?w=800&h=600&fit=crop&crop=center"
                                         class="d-block mx-auto rounded carousel-img-lg menu-item"
                                         alt="Iced Chai Latte"
                                         data-bs-toggle="modal"
                                         data-bs-target="#itemModal"
                                         data-item="Iced Chai Latte"
                                         data-type="drink"
                                         onerror="this.classList.add('image-error')">
                                    <div class="carousel-caption-text">Iced Chai Latte</div>
                                </div>
                                <div class="carousel-item text-center">
                                    <img src="https://images.unsplash.com/photo-1564890369478-c89ca6d9cde9?w=800&h=600&fit=crop&crop=center"
                                         class="d-block mx-auto rounded carousel-img-lg menu-item"
                                         alt="Iced Matcha Latte"
                                         data-bs-toggle="modal"
                                         data-bs-target="#itemModal"
                                         data-item="Iced Matcha Latte"
                                         data-type="drink"
                                         onerror="this.classList.add('image-error')">
                                    <div class="carousel-caption-text">Iced Matcha Latte</div>
                                </div>
                                <div class="carousel-item text-center">
                                    <img src="https://images.unsplash.com/photo-1572490122747-3968b75cc699?w=800&h=600&fit=crop&crop=center"
                                         class="d-block mx-auto rounded carousel-img-lg menu-item"
                                         alt="Blended Coffee"
                                         data-bs-toggle="modal"
                                         data-bs-target="#itemModal"
                                         data-item="Blended Coffee"
                                         data-type="drink"
                                         onerror="this.classList.add('image-error')">
                                    <div class="carousel-caption-text">Blended Coffee</div>
                                </div>
                                <div class="carousel-item text-center">
                                    <img src="https://images.unsplash.com/photo-1600271886742-f049cd451bba?w=800&h=600&fit=crop&crop=center"
                                         class="d-block mx-auto rounded carousel-img-lg menu-item"
                                         alt="Juice"
                                         data-bs-toggle="modal"
                                         data-bs-target="#itemModal"
                                         data-item="Juice"
                                         data-type="drink"
                                         onerror="this.classList.add('image-error')">
                                    <div class="carousel-caption-text">Juice</div>
                                </div>
                                <div class="carousel-item text-center">
                                    <img src="https://images.unsplash.com/photo-1548839140-29a749e1cf4d?w=800&h=600&fit=crop&crop=center"
                                         class="d-block mx-auto rounded carousel-img-lg menu-item"
                                         alt="Water"
                                         data-bs-toggle="modal"
                                         data-bs-target="#itemModal"
                                         data-item="Water"
                                         data-type="drink"
                                         onerror="this.classList.add('image-error')">
                                    <div class="carousel-caption-text">Water</div>
                                </div>
                            </div>
                            <button class="carousel-control-prev" type="button" data-bs-target="#carouselDrinks" data-bs-slide="prev">
                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                <span class="visually-hidden">Previous</span>
                            </button>
                            <button class="carousel-control-next" type="button" data-bs-target="#carouselDrinks" data-bs-slide="next">
                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                <span class="visually-hidden">Next</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Row 4: Food Menu -->
            <div class="row gx-3 gy-3 mb-2">
                <div class="col-12">
                    <div class="section">
                        <h5 class="section-title">
                            <i class="bi bi-egg-fried me-2"></i>Food Menu
                            <small class="ms-2 opacity-75">(Click to customize and add)</small>
                        </h5>
                        <div id="carouselFood" class="carousel slide" data-bs-ride="false" data-bs-touch="true" data-bs-wrap="true">
                            <div class="carousel-inner">
                                <div class="carousel-item active text-center">
                                    <img src="https://images.unsplash.com/photo-1481070555726-e2fe8357725c?w=800&h=600&fit=crop&crop=center"
                                         class="d-block mx-auto rounded carousel-img-lg menu-item"
                                         alt="Breakfast Sandwich"
                                         data-bs-toggle="modal"
                                         data-bs-target="#itemModal"
                                         data-item="Breakfast Sandwich"
                                         data-type="food"
                                         onerror="this.classList.add('image-error')">
                                    <div class="carousel-caption-text">Breakfast Sandwich</div>
                                </div>
                                <div class="carousel-item text-center">
                                    <img src="https://images.unsplash.com/photo-1551106652-a5bcf4b29ab6?w=800&h=600&fit=crop&crop=center"
                                         class="d-block mx-auto rounded carousel-img-lg menu-item"
                                         alt="Bagel with Cream Cheese"
                                         data-bs-toggle="modal"
                                         data-bs-target="#itemModal"
                                         data-item="Bagel with Cream Cheese"
                                         data-type="food"
                                         onerror="this.classList.add('image-error')">
                                    <div class="carousel-caption-text">Bagel with Cream Cheese</div>
                                </div>
                                <div class="carousel-item text-center">
                                    <img src="https://images.unsplash.com/photo-1555507036-ab1f4038808a?w=800&h=600&fit=crop&crop=center"
                                         class="d-block mx-auto rounded carousel-img-lg menu-item"
                                         alt="Croissant"
                                         data-bs-toggle="modal"
                                         data-bs-target="#itemModal"
                                         data-item="Croissant"
                                         data-type="food"
                                         onerror="this.classList.add('image-error')">
                                    <div class="carousel-caption-text">Croissant</div>
                                </div>
                                <div class="carousel-item text-center">
                                    <img src="https://images.unsplash.com/photo-1607958996333-41aef7caefaa?w=800&h=600&fit=crop&crop=center"
                                         class="d-block mx-auto rounded carousel-img-lg menu-item"
                                         alt="Blueberry Muffin"
                                         data-bs-toggle="modal"
                                         data-bs-target="#itemModal"
                                         data-item="Blueberry Muffin"
                                         data-type="food"
                                         onerror="this.classList.add('image-error')">
                                    <div class="carousel-caption-text">Blueberry Muffin</div>
                                </div>
                                <div class="carousel-item text-center">
                                    <img src="https://images.unsplash.com/photo-1528207776546-365bb710ee93?w=800&h=600&fit=crop&crop=center"
                                         class="d-block mx-auto rounded carousel-img-lg menu-item"
                                         alt="Pancakes"
                                         data-bs-toggle="modal"
                                         data-bs-target="#itemModal"
                                         data-item="Pancakes"
                                         data-type="food"
                                         onerror="this.classList.add('image-error')">
                                    <div class="carousel-caption-text">Pancakes</div>
                                </div>
                                <div class="carousel-item text-center">
                                    <img src="https://images.unsplash.com/photo-1484723091739-30a097e8f929?w=800&h=600&fit=crop&crop=center"
                                         class="d-block mx-auto rounded carousel-img-lg menu-item"
                                         alt="French Toast"
                                         data-bs-toggle="modal"
                                         data-bs-target="#itemModal"
                                         data-item="French Toast"
                                         data-type="food"
                                         onerror="this.classList.add('image-error')">
                                    <div class="carousel-caption-text">French Toast</div>
                                </div>
                                <div class="carousel-item text-center">
                                    <img src="https://images.unsplash.com/photo-1626700051175-6818013e1d4f?w=800&h=600&fit=crop&crop=center"
                                         class="d-block mx-auto rounded carousel-img-lg menu-item"
                                         alt="Breakfast Burrito"
                                         data-bs-toggle="modal"
                                         data-bs-target="#itemModal"
                                         data-item="Breakfast Burrito"
                                         data-type="food"
                                         onerror="this.classList.add('image-error')">
                                    <div class="carousel-caption-text">Breakfast Burrito</div>
                                </div>
                                <div class="carousel-item text-center">
                                    <img src="https://images.unsplash.com/photo-1541519227354-08fa5d50c44d?w=800&h=600&fit=crop&crop=center"
                                         class="d-block mx-auto rounded carousel-img-lg menu-item"
                                         alt="Avocado Toast"
                                         data-bs-toggle="modal"
                                         data-bs-target="#itemModal"
                                         data-item="Avocado Toast"
                                         data-type="food"
                                         onerror="this.classList.add('image-error')">
                                    <div class="carousel-caption-text">Avocado Toast</div>
                                </div>
                                <div class="carousel-item text-center">
                                    <img src="https://images.unsplash.com/photo-1528735602780-2552fd46c7af?w=800&h=600&fit=crop&crop=center"
                                         class="d-block mx-auto rounded carousel-img-lg menu-item"
                                         alt="Turkey Sandwich"
                                         data-bs-toggle="modal"
                                         data-bs-target="#itemModal"
                                         data-item="Turkey Sandwich"
                                         data-type="food"
                                         onerror="this.classList.add('image-error')">
                                    <div class="carousel-caption-text">Turkey Sandwich</div>
                                </div>
                                <div class="carousel-item text-center">
                                    <img src="https://images.unsplash.com/photo-1626700051175-6818013e1d4f?w=800&h=600&fit=crop&crop=center"
                                         class="d-block mx-auto rounded carousel-img-lg menu-item"
                                         alt="Chicken Wrap"
                                         data-bs-toggle="modal"
                                         data-bs-target="#itemModal"
                                         data-item="Chicken Wrap"
                                         data-type="food"
                                         onerror="this.classList.add('image-error')">
                                    <div class="carousel-caption-text">Chicken Wrap</div>
                                </div>
                                <div class="carousel-item text-center">
                                    <img src="https://images.unsplash.com/photo-1546793665-c74683f339c1?w=800&h=600&fit=crop&crop=center"
                                         class="d-block mx-auto rounded carousel-img-lg menu-item"
                                         alt="Caesar Salad"
                                         data-bs-toggle="modal"
                                         data-bs-target="#itemModal"
                                         data-item="Caesar Salad"
                                         data-type="food"
                                         onerror="this.classList.add('image-error')">
                                    <div class="carousel-caption-text">Caesar Salad</div>
                                </div>
                                <div class="carousel-item text-center">
                                    <img src="https://images.unsplash.com/photo-1547592166-23ac45744acd?w=800&h=600&fit=crop&crop=center"
                                         class="d-block mx-auto rounded carousel-img-lg menu-item"
                                         alt="Soup of the Day"
                                         data-bs-toggle="modal"
                                         data-bs-target="#itemModal"
                                         data-item="Soup of the Day"
                                         data-type="food"
                                         onerror="this.classList.add('image-error')">
                                    <div class="carousel-caption-text">Soup of the Day</div>
                                </div>
                                <div class="carousel-item text-center">
                                    <img src="https://images.unsplash.com/photo-1528736235302-52922df5c122?w=800&h=600&fit=crop&crop=center"
                                         class="d-block mx-auto rounded carousel-img-lg menu-item"
                                         alt="Grilled Cheese"
                                         data-bs-toggle="modal"
                                         data-bs-target="#itemModal"
                                         data-item="Grilled Cheese"
                                         data-type="food"
                                         onerror="this.classList.add('image-error')">
                                    <div class="carousel-caption-text">Grilled Cheese</div>
                                </div>
                                <div class="carousel-item text-center">
                                    <img src="https://images.unsplash.com/photo-1567234669003-dce7a7a88821?w=800&h=600&fit=crop&crop=center"
                                         class="d-block mx-auto rounded carousel-img-lg menu-item"
                                         alt="Club Sandwich"
                                         data-bs-toggle="modal"
                                         data-bs-target="#itemModal"
                                         data-item="Club Sandwich"
                                         data-type="food"
                                         onerror="this.classList.add('image-error')">
                                    <div class="carousel-caption-text">Club Sandwich</div>
                                </div>
                            </div>
                            <button class="carousel-control-prev" type="button" data-bs-target="#carouselFood" data-bs-slide="prev">
                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                <span class="visually-hidden">Previous</span>
                            </button>
                            <button class="carousel-control-next" type="button" data-bs-target="#carouselFood" data-bs-slide="next">
                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                <span class="visually-hidden">Next</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Special Requests -->
            <div class="row gx-3 gy-3 mb-2">
                <div class="col-12">
                    <div class="section">
                        <h5 class="section-title">Special Requests</h5>
                        <div class="input-group">
                            <input id="specialRequests" name="specialRequests" type="text" class="form-control" placeholder="Start typing or speaking..." aria-label="Special requests">
                            <button id="micButton" class="btn btn-mic" type="button" title="Tap to speak">
                                <i class="bi bi-mic-fill"></i>
                            </button>
                        </div>
                        <div class="form-text small text-muted mt-2">
                            Add any allergy notes, extra sauces, or preparation preferences.
                        </div>
                        <!-- Hidden field to carry special requests forward -->
                        <input type="hidden" id="hiddenSpecialRequests" name="hiddenSpecialRequests">
                    </div>
                </div>
            </div>

        </div> <!-- /menu-body -->
        <!-- Footer actions -->
        <footer id="regularMenuFooter" class="menu-footer d-flex">
            <button id="cancelBtn" class="btn btn-cancel flex-fill">CANCEL</button>
            <button id="orderBtn" class="btn btn-order flex-fill">ORDER</button>
        </footer>

        <!-- Viewing Mode Footer (hidden by default) -->
        <footer id="viewingModeFooter" class="menu-footer d-flex" style="display: none;">
            <a href="@Url.Action("Index", "Home")" class="btn btn-order flex-fill text-center text-decoration-none">RETURN TO LOGIN</a>
        </footer>

    </div> <!-- /menu-card -->
</div> <!-- /container --><!
-- No Items Selected Modal -->
<div class="modal fade" id="noItemsModal" tabindex="-1" aria-labelledby="noItemsLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content text-center p-4">
            <div class="modal-body">
                <div class="mb-3">
                    <span class="text-danger display-4">✖</span>
                </div>
                <h4 id="noItemsLabel">No Items Selected</h4>
                <p class="text-muted">Please add at least one item to your order before proceeding to checkout.</p>
            </div>
        </div>
    </div>
</div>

<!-- Cancel Order Confirmation Modal -->
<div class="modal fade" id="cancelOrderModal" tabindex="-1" aria-labelledby="cancelOrderLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content p-4">
            <div class="modal-header border-0">
                <h5 class="modal-title" id="cancelOrderLabel">Cancel Order?</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p class="text-muted mb-0">Are you sure you want to cancel your order? All selected items will be removed.</p>
            </div>
            <div class="modal-footer border-0">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">No, Keep Order</button>
                <button type="button" class="btn btn-danger" id="confirmCancelOrder">Yes, Cancel Order</button>
            </div>
        </div>
    </div>
</div>

<!-- Item Customization Modal -->
<div class="modal fade" id="itemModal" tabindex="-1" aria-labelledby="itemModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content p-4">
            <div class="modal-header">
                <h5 class="modal-title" id="itemModalLabel">Customize Item</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <div class="modal-body">
                <!-- Tab System for Multiple Instances -->
                <div class="instance-tabs-container mb-3">
                    <div class="instance-tabs-wrapper">
                        <div id="instanceTabs" class="instance-tabs d-flex align-items-center gap-2">
                            <!-- Tabs will be dynamically added here -->
                        </div>
                        <button type="button" class="btn btn-sm btn-outline-primary add-tab-btn" id="addInstanceTab" title="Add another instance">
                            <i class="bi bi-plus-lg"></i>
                        </button>
                    </div>
                </div>

                <!-- Drink Customization Options -->
                <div id="drinkOptions" class="item-options">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <h6>Style</h6>
                            <div><input type="checkbox" id="hot" name="drink-hot"> <label for="hot">Hot</label></div>
                            <div><input type="checkbox" id="iced" name="drink-iced"> <label for="iced">Iced</label></div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <h6>Milk</h6>
                            <div><input type="checkbox" id="dairy" name="drink-dairy"> <label for="dairy">Dairy</label></div>
                            <div><input type="checkbox" id="oat" name="drink-oat"> <label for="oat">Oat</label></div>
                            <div><input type="checkbox" id="almond" name="drink-almond"> <label for="almond">Almond</label></div>
                            <div><input type="checkbox" id="soy" name="drink-soy"> <label for="soy">Soy</label></div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <h6>Flavors</h6>
                            <div><input type="checkbox" id="vanilla" name="drink-vanilla"> <label for="vanilla">Vanilla</label></div>
                            <div><input type="checkbox" id="mint" name="drink-mint"> <label for="mint">Mint</label></div>
                            <div><input type="checkbox" id="cinnamon" name="drink-cinnamon"> <label for="cinnamon">Cinnamon</label></div>
                            <div><input type="checkbox" id="hazelnut" name="drink-hazelnut"> <label for="hazelnut">Hazelnut</label></div>
                            <div><input type="checkbox" id="caramel" name="drink-caramel"> <label for="caramel">Caramel</label></div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <h6>Additions</h6>
                            <div><input type="checkbox" id="whip" name="drink-whip"> <label for="whip">Whip Cream</label></div>
                            <div><input type="checkbox" id="extraShot" name="drink-extraShot"> <label for="extraShot">Extra Shot</label></div>
                            <div><input type="checkbox" id="decaf" name="drink-decaf"> <label for="decaf">Decaf</label></div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-12 mb-3">
                            <h6>Restrictions</h6>
                            <div><input type="checkbox" id="sugarFree" name="drink-sugarFree"> <label for="sugarFree">Sugar Free</label></div>
                            <div><input type="checkbox" id="caffeineFree" name="drink-caffeineFree"> <label for="caffeineFree">Caffeine Free</label></div>
                        </div>
                    </div>
                </div>

                <!-- Food Customization Options -->
                <div id="foodOptions" class="item-options" style="display: none;">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <h6>Cooking Preferences</h6>
                            <div><input type="checkbox" id="wellDone" name="food-wellDone"> <label for="wellDone">Well Done</label></div>
                            <div><input type="checkbox" id="medium" name="food-medium"> <label for="medium">Medium</label></div>
                            <div><input type="checkbox" id="light" name="food-light"> <label for="light">Light</label></div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <h6>Sides</h6>
                            <div><input type="checkbox" id="hashBrowns" name="food-hashBrowns"> <label for="hashBrowns">Hash Browns</label></div>
                            <div><input type="checkbox" id="fruit" name="food-fruit"> <label for="fruit">Fresh Fruit</label></div>
                            <div><input type="checkbox" id="toast" name="food-toast"> <label for="toast">Toast</label></div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <h6>Additions</h6>
                            <div><input type="checkbox" id="extraCheese" name="food-extraCheese"> <label for="extraCheese">Extra Cheese</label></div>
                            <div><input type="checkbox" id="bacon" name="food-bacon"> <label for="bacon">Bacon</label></div>
                            <div><input type="checkbox" id="avocado" name="food-avocado"> <label for="avocado">Avocado</label></div>
                            <div><input type="checkbox" id="sausage" name="food-sausage"> <label for="sausage">Sausage</label></div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <h6>Dietary Restrictions</h6>
                            <div><input type="checkbox" id="glutenFree" name="food-glutenFree"> <label for="glutenFree">Gluten Free</label></div>
                            <div><input type="checkbox" id="vegetarian" name="food-vegetarian"> <label for="vegetarian">Vegetarian</label></div>
                            <div><input type="checkbox" id="vegan" name="food-vegan"> <label for="vegan">Vegan</label></div>
                            <div><input type="checkbox" id="noDairy" name="food-noDairy"> <label for="noDairy">No Dairy</label></div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-12 mb-3">
                            <h6>Preparation Notes</h6>
                            <div><input type="checkbox" id="noOnions" name="food-noOnions"> <label for="noOnions">No Onions</label></div>
                            <div><input type="checkbox" id="noTomatoes" name="food-noTomatoes"> <label for="noTomatoes">No Tomatoes</label></div>
                            <div><input type="checkbox" id="extraCrispy" name="food-extraCrispy"> <label for="extraCrispy">Extra Crispy</label></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-secondary btn-cancel" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-danger" id="deleteOrderBtn" style="display: none;">Delete Order</button>
                <button type="button" class="btn btn-secondary" id="saveOrderBtn">Save Order</button>
                <button type="button" class="btn btn-order" id="applyModifiers">Apply</button>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script src="~/js/menu.js" asp-append-version="true"></script>
}